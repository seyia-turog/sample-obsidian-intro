---

## Status: Pending  
Thumbnail: "#42A5F5"  
Description: Card Lifecycle & Management Operations  
Application: Retail Engine  
Due On: 2025-10-12T12:00:00

---

## Overview

The **Cards Management Module** handles the complete lifecycle of debit and credit cards in the digital banking platform.

It manages card listing, card details retrieval, card linking and unlinking, card blocking and unblocking (hotlist/dehotlist), external card addition, and new card requests, integrating with Card Processor, CBA Adapter, User Settings Utility, and Message Workers to ensure secure card operations and user notifications.

---

## Core Business Functions

- **Card Listing & Details** â€“ View all linked cards and retrieve detailed information for specific cards.
- **Card Removal** â€“ Unlink and remove cards from user accounts.
- **Card Security Controls** â€“ Block (hotlist) and unblock (dehotlist) cards for security purposes.
- **External Card Management** â€“ Link external debit/credit cards to user accounts.
- **New Card Requests** â€“ Request new physical or virtual cards with fee processing.

---

## Technical Dependencies

### Adapter & Processor Dependencies

|Adapter / Processor|Business Purpose|
|---|---|
|User Settings Utility|Manages card lists, card removal from settings, card status updates, and card creation in user preferences.|
|Processor (Cards)|Handles card detail retrieval, card blocking/unblocking operations, and new card creation.|
|CBA Adapter|Manages card linking/unlinking in core banking and processes card fees through withdrawals.|
|Util Worker (Messages)|Sends card-related notifications including removal, blocking, unblocking, and card addition alerts.|

---

## REST Endpoints

### Omnichannel APIs

| **Action** | **Summary**        | **Route**               | **Method** | **Operation ID** | **Status** |
| ---------- | ------------------ | ----------------------- | ---------- | ---------------- | ---------- |
| CD001      | List Cards         | /cards                  | GET        | listCards        | ğŸ”„         |
| CD002      | Read Card          | /cards/{cardId}         | GET        | readCard         | ğŸ”„         |
| CD003      | Remove Card        | /cards/{cardId}         | DELETE     | removeCard       | ğŸ”„         |
| CD004      | Hotlist Card       | /cards/{cardId}/hotlist | POST       | hotlistCard      | ğŸ”„         |
| CD005      | Dehotlist Card     | /cards/{cardId}/hotlist | DELETE     | dehotlistCard    | ğŸ”„         |
| CD006      | Add External Card  | /cards/external         | POST       | addExternalCard  | ğŸ”„         |
| CD007      | Request a New Card | /cards/internal         | POST       | â€”                | ğŸ”„         |

---

## Dependency Service APIs

### 1. User Settings Utility APIs

| **Action** | **Summary**                    | **Route**                          | **Method** | **Operation ID** | **Status** |
| ---------- | ------------------------------ | ---------------------------------- | ---------- | ---------------- | ---------- |
| SU019      | Fetch Cards List               | /api/v1/cards/list?userUuid={Uuid} | GET        | CD001            | ğŸ”„         |
| SU020      | Remove Card from User Settings |                                    | DELETE     | CD003            | ğŸ”„         |
| SU021      | Block Card                     | /api/v1/cards/CARD-001/status      | POST       | CD004            | ğŸ”„         |
| SU022      | Block Card                     | /api/v1/cards/CARD-001/status      | POST       | CD005            | ğŸ”„         |
| SU023      | Add Card to User Settings      | /api/v1/cards/create               | POST       | CD006            | ğŸ”„         |

---

### 2. Card Processor APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|PC001|Retrieve Card Detail|/api/v1/cards/internal/{{card_id}}?merchantId={{merchant_id}}&customerId={{customer_id}}|GET|CD002|ğŸ”„|
|PC002|Block Card|api/v1/cards/internal/block|POST|CD004|ğŸ”„|
|PC003|Block Card|/api/v1/cards/internal/status|POST|CD005|ğŸ”„|
|PC004|Create a Card|/api/v1/cards/internal|POST|CD007|ğŸ”„|

---

### 3. CBA Adapter APIs

| **Action** | **Summary**                   | **Route**                         | **Method** | **Operation ID** | **Status** |
| ---------- | ----------------------------- | --------------------------------- | ---------- | ---------------- | ---------- |
| CB031      | Unlink Card from User Account | TBD                               | DELETE     | CD003            | ğŸ”„         |
| CB032      | Link Card to User Account     | TBD                               | POST       | CD006, CD007     | ğŸ”„         |
| CB029      | Deduct Card Processing Fee    | /api/v1/savings/accounts/withdraw | POST       | CD007            | ğŸ”„         |

---

### 4. Message Processor APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|UM028|Send Card Removed Notification||DELETE|CD003|ğŸ”„|
|UM029|Send Card Blocked Notification|/api/v1/messages/card/block|POST|CD004|ğŸ”„|
|UM030|Send Card Unblocked Notification|/api/v1/messages/card/block|POST|CD005|ğŸ”„|
|UM031|Send Card Added Notification|TBD|POST|CD006|ğŸ”„|
|UM032|Send Card Added Notification|TBD|POST|CD007|ğŸ”„|

---

## Security and Governance

### Permissions & APIs

|**Permission**|**Permission Name**|**APIs**|**Status**|
|---|---|---|---|
|card_view|View Card Information|CD001, CD002|ğŸ”„|
|card_manage|Manage Cards|CD003, CD006, CD007|ğŸ”„|
|card_security|Control Card Security|CD004, CD005|ğŸ”„|

---

### Roles & Permissions

|**Role**|**Role Name**|**Permissions**|**Status**|
|---|---|---|---|
|RP1101|Card Holder (Self)|card_view, card_manage, card_security|ğŸ”„|
|RP1102|Customer Support|card_view, card_security|ğŸ”„|
|RP1103|Card Administrator|card_view, card_manage, card_security|ğŸ”„|
|RP1104|View Only User|card_view|ğŸ”„|

---

### Policies & Attributes

|**Policy ID**|**Policy**|**Attribute / Condition**|**Status**|
|---|---|---|---|
|P_CRD_001|Users can only manage their own cards|`card.owner_id eq user.id`|ğŸ”„|
|P_CRD_002|Card blocking requires valid reason|`block.reason.length > 0`|ğŸ”„|
|P_CRD_003|New card requests require sufficient balance|`account.balance >= card.fee`|ğŸ”„|
|P_CRD_004|Hotlisted cards cannot process transactions|`card.status != "hotlisted"`|ğŸ”„|
|P_CRD_005|External card linking requires verification|`card.verified eq true`|ğŸ”„|
|P_CRD_006|Card removal requires zero pending transactions|`card.pending_transactions eq 0`|ğŸ”„|

---

### Related Documents

1. **Card Issuance Procedures**
2. **Card Security & Fraud Prevention Guide**
3. **Hotlist/Dehotlist Workflow Documentation**
4. **External Card Integration Standards**
5. **Card Fee Structure**

---

âœ… - Complete  
ğŸ”„ - In Progress  
â° - Delayed  
ğŸš§ - In Testing  
âš ï¸ - Comments from Testing  
â›” - Failed Testing  
ğŸ“‹ - Planned for future release