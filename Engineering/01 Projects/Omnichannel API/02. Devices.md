---

## Status: Pending  
Thumbnail: "#FF8A65"  
Description: Device Enrollment, Certificate Management & Security  
Application: Retail Engine  
Due On: 2025-12-12T12:00:00

---

## Overview

The **Device Management Module** handles the complete lifecycle of device security and enrollment in the digital banking platform.

It manages device activation, certificate signing requests (CSR), certificate rotation, device ownership transfers, and PIN management, integrating with Identity, Document Processors, Message Workers, and User Settings to ensure secure device-based authentication and compliance.

---

## Core Business Functions

- **Device Enrollment & Status** â€“ Monitor and manage device activation states for security compliance.
- **Certificate Management** â€“ Generate, sign, and rotate device certificates for secure authentication.
- **Device Ownership Transfer** â€“ Securely transfer device ownership between authorized users.
- **PIN Management** â€“ Create, change, reset, and confirm device PINs for access control.
- **Security Monitoring** â€“ Track device status changes and enforce security policies.

---

## Technical Dependencies

### Adapter & Processor Dependencies

|Adapter / Processor|Business Purpose|
|---|---|
|Identity Adapter|Validates device enrollment, manages certificate tokens, verifies PINs, and handles reset processes.|
|Processor (Documents)|Generates CSRs, submits to external Certificate Authority (CA), signs certificates, and issues device certificates.|
|Util Worker (Messages)|Sends device status notifications, certificate rotation notices, transfer requests, and PIN-related alerts.|
|User Settings Utility|Manages device preferences, handles device resets, and stores device PIN configurations.|

---

## REST Endpoints

### Device Management APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|DV001|Check Device Status|/devices/enrollment/status|GET|â€”|ðŸ”„|
|DV002|(de)Activate Device|/devices/enrollment/status|POST|â€”|ðŸ”„|
|DV003|Submit CSR for Device|/devices/certificate/request|POST|â€”|ðŸ”„|
|DV004|Sign CSR for Device|/devices/certificate/sign|POST|â€”|ðŸ”„|
|DV005|Rotate Expiring Certificates|/devices/certificate/rotate|POST|â€”|ðŸ”„|
|DV006|Transfer Device Ownership|/devices/ownership/transfer|POST|â€”|ðŸ”„|
|DV007|Accept Transfer Request|/devices/ownership/accept|POST|â€”|ðŸ”„|
|DV008|Create Device PIN|/devices/pin/my|POST|â€”|ðŸ”„|
|DV009|Change Device PIN|/devices/pin/change|POST|â€”|ðŸ”„|
|DV010|Reset Device PIN|/devices/pin/reset|POST|â€”|ðŸ”„|
|DV011|Confirm PIN Reset|/devices/pin/confirm|POST|â€”|ðŸ”„|

---

## Dependency Service APIs

### 1. Identity Adapter APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|AI010|Fetch Device Status||GET|DV001|ðŸ”„|
|AI011|Validate Device Enrollment||POST|DV003|ðŸ”„|
|AI012|Validate CA Token||POST|DV004|ðŸ”„|
|AI013|Check Certificate Expiry||POST|DV005|ðŸ”„|
|AI014|Validate Current PIN & Update Claim||POST|DV009|ðŸ”„|
|AI015|Trigger Notification of Device PIN||POST|DV010|ðŸ”„|
|AI016|Validate Reset Token & Set New PIN||POST|DV011|ðŸ”„|

---

### 2. Document Processor APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|PD005|Generate CSR & Submit to External CA||POST|DV003|ðŸ”„|
|PD006|Sign Certificate & Issue Device Cert||POST|DV004|ðŸ”„|
|PD007|Generate NEW CSR & Submit to CA||POST|DV005|ðŸ”„|

---

### 3. Notification Worker APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|UM008|Send Device Status Change Notification||POST|DV002|ðŸ”„|
|UM009|Send Certificate Rotation Notice||POST|DV005|ðŸ”„|
|UM010|Send Transfer Request to Recipient||POST|DV006|ðŸ”„|
|UM011|Send PIN Change Confirmation||POST|DV009|ðŸ”„|
|UM012|Send PIN Challenge Notification||POST|DV010|ðŸ”„|
|UM013|Send Reset Completion Notice||POST|DV011|ðŸ”„|

---

### 4. User Settings Utility

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|SU002|Update Device Preferences||PUT|DV002|ðŸ”„|
|SU00X|Trigger User Device Reset||POST|DV006|ðŸ”„|
|SU003|Reset User Device||POST|DV007|ðŸ”„|
|SU004|Create Device PIN||POST|DV008|ðŸ”„|

---

## Security and Governance

### Permissions & APIs

|**Permission**|**Permission Name**|**APIs**|**Status**|
|---|---|---|---|
|device_view|View Device Information|DV001|ðŸ”„|
|device_manage|Manage Device Enrollment|DV002, DV003, DV004|ðŸ”„|
|device_certificate|Manage Device Certificates|DV003, DV004, DV005|ðŸ”„|
|device_transfer|Transfer Device Ownership|DV006, DV007|ðŸ”„|
|device_pin|Manage Device PIN|DV008, DV009, DV010, DV011|ðŸ”„|

---

### Roles & Permissions

|**Role**|**Role Name**|**Permissions**|**Status**|
|---|---|---|---|
|RP301|Device Administrator|device_view, device_manage, device_certificate, device_transfer, device_pin|ðŸ”„|
|RP302|Security Officer|device_view, device_manage, device_certificate|ðŸ”„|
|RP303|Standard User (Self)|device_view, device_manage, device_pin, device_transfer|ðŸ”„|
|RP304|Support Analyst|device_view|ðŸ”„|

---

### Policies & Attributes

|**Policy ID**|**Policy**|**Attribute / Condition**|**Status**|
|---|---|---|---|
|P_DEV_001|Users can only manage their own devices|`device.owner_id eq user.id`|ðŸ”„|
|P_DEV_002|Device activation requires valid session|`identity.session.valid eq true`|ðŸ”„|
|P_DEV_003|Certificate operations require security role|`role in ["RP301", "RP302"]`|ðŸ”„|
|P_DEV_004|Device transfers require recipient acceptance|`transfer.status eq "accepted"`|ðŸ”„|
|P_DEV_005|PIN changes require current PIN validation|`pin.validated eq true`|ðŸ”„|
|P_DEV_006|Certificate rotation triggers before expiration|`certificate.days_remaining <= 30`|ðŸ”„|

---

### Related Documents

1. **Device Enrollment Process Guide**
2. **Certificate Authority Integration Specifications**
3. **Device Security Standards**
4. **PIN Management Policy**
5. **Device Transfer Workflow**

---

âœ… - Complete  
ðŸ”„ - In Progress  
â° - Delayed  
ðŸš§ - In Testing  
âš ï¸ - Comments from Testing  
â›” - Failed Testing  
ðŸ“‹ - Planned for future release