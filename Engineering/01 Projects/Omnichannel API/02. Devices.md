---
Thumbnail: "#FF8A65"
Description: Device Enrollment, Certificate Management & Security
Application: Omnichannel API
Due On: 2025-12-12T12:00:00
---

## Overview

The **Device Management Module** handles the complete lifecycle of device security and enrollment in the digital banking platform.

It manages device activation/deactivation, certificate signing requests (CSR), certificate rotation, device ownership transfers, and PIN management, integrating with Identity Adapter, User Settings Utility, and Message Workers to ensure secure device-based authentication and compliance.

---

## Core Business Functions

- **Device Enrolment & Status** â€“ Monitor and manage device activation states for security compliance.
- **Certificate Management** â€“ Generate, sign, and rotate device certificates for secure authentication.
- **Device Ownership Transfer** â€“ Securely transfer device ownership between authorized users.
- **PIN Management** â€“ Create, change, reset, and confirm device PINs for access control.
- **Security Monitoring** â€“ Track device status changes and enforce security policies.

---

## Technical Dependencies

### Adapter & Processor Dependencies

|Adapter / Processor|Business Purpose|
|---|---|
|Identity Adapter|Manages device status, device activation/deactivation, CSR generation, transfer tokens, and PIN operations.|
|User Settings Utility|Stores certificate preferences, manages device preferences, handles device resets, and creates device PINs.|
|Util Worker (Messages)|Sends device status notifications, transfer requests, PIN-related alerts, and completion notices.|

---

## REST Endpoints

### Omnichannel APIs

| **Action** | **Summary**                | **Route**                    | **Method** | **Operation ID**         | **Status** |
| ---------- | -------------------------- | ---------------------------- | ---------- | ------------------------ | ---------- |
| DV001      | Get Device Status          | /devices/enrollment/status   | GET        | getDeviceStatus          | ðŸ”„         |
| DV002      | Activate Device            | /devices/enrollment/status   | POST       | activateDevice           | ðŸ”„         |
| DV003      | Deactivate Device          | /devices/enrollment/status   | POST       | deactivateDevice         | ðŸ”„         |
| DV004      | Submit Device CSR          | /devices/certificate/request | POST       | submitDeviceCsr          | ðŸ”„         |
| DV004      | Sign Device CSR            | /devices/certificate/sign    | POST       | signDeviceCsr            | ðŸ”„         |
| DV005      | Rotate Device Certificates | /devices/certificate/rotate  | POST       | rotateDeviceCertificates | ðŸ”„         |
| DV006      | Transfer Device Ownership  | /devices/ownership/transfer  | POST       | transferDeviceOwnershop  | ðŸ”„         |
| DV007      | Accept Device Transfer     | /devices/ownership/accept    | POST       | acceptDeviceTransfer     | ðŸ”„         |
| DV008      | Reset Device PIN           | /devices/pin/reset           | POST       | resetDevicePin           | ðŸ”„         |
| DV008      | Create Device PIN          | /devices/pin/my              | POST       | createDevicePin          | ðŸ”„         |
| DV010      | Reset Device PIN           | /devices/pin/reset           | POST       | resetDevicePin           | ðŸ”„         |
| DV011      | Confirm Device PIN Reset   | /devices/pin/confirm         | POST       | confirmDevicePinReset    | ðŸ”„         |
| DV009      | Update Device PIN          | /devices/pin/change          | POST       | updateDevicePin          | ðŸ”„         |

---

## Dependency Service APIs

### 1. Identity Adapter APIs

| **Action** | **Summary**                   | **Route**                                      | **Method** | **Operation ID** | **Status** |
| ---------- | ----------------------------- | ---------------------------------------------- | ---------- | ---------------- | ---------- |
| AI010      | Fetch Device Status           | /api/v1/devices/{deviceId}/status              | GET        | DV001            | ðŸ”„         |
| AI034      | Activate Device               |                                                | POST       | DV002            | ðŸ”„         |
| AI035      | Deactivate Device             |                                                | POST       | DV002            | ðŸ”„         |
| AI036      | Submit Device CSR             |                                                | POST       | DV003, DV005     | ðŸ”„         |
| AI036      | Sign Device CSR               |                                                | POST       | DV004, DV005     | ðŸ”„         |
| AI037      | Generate Transfer Token       |                                                | POST       | DV006            | ðŸ”„         |
| AI038      | Validate Transfer Token       |                                                | POST       | DV007            | ðŸ”„         |
| AI039      | Create Device Pin             |                                                | POST       | DV007            | ðŸ”„         |
| AI039      | Generate Temporary Device PIN |                                                | POST       | DV007            | ðŸ”„         |
| AI040      | Change Device Pin             | /api/v1/auth/users/{userId}/device-code/verify | POST       | DV009            | ðŸ”„         |
| AI016      | Confirm Device PIN Reset      |                                                | POST       | DV011            | ðŸ”„         |


---

### 2. User Settings Utility APIs

| **Action** | **Summary**                                                      | **Route** | **Method** | **Operation ID** | **Status** |
| ---------- | ---------------------------------------------------------------- | --------- | ---------- | ---------------- | ---------- |
| SU002      | Update Device Preferences                                        |           | POST       | DV002            | ðŸ”„         |
| SU029      | Store Certificate Preferences (Expiry Reminders, Security Flags) |           | POST       | DV004, DV005     | ðŸ”„         |
| SU031      | Trigger User Device Reset (Clean Old Preferences)                |           | POST       | DV006            | ðŸ”„         |
| SU003      | Reset User Device (Apply New Device Preferences)                 |           | POST       | DV007            | ðŸ”„         |
| SU004      | Create Device PIN                                                |           | POST       | DV008            | ðŸ”„         |
| SU002      | Update Device Preferences                                        |           | POST       | DV002            | ðŸ”„         |

---

### 3. Notification Worker APIs

| **Action** | **Summary**                            | **Route** | **Method** | **Operation ID** | **Status** |
| ---------- | -------------------------------------- | --------- | ---------- | ---------------- | ---------- |
| UM008      | Send Device Status Change Notification |           | POST       | DV002            | ðŸ”„         |
| UM010      | Send Transfer Request to New Recipient |           | POST       | DV006            | ðŸ”„         |
| UM011      | Send PIN Change Confirmation           |           | POST       | DV009            | ðŸ”„         |
| UM012      | Send PIN Challenge Notification        |           | POST       | DV010            | ðŸ”„         |
| UM013      | Send Reset Completion Notice           |           | POST       | DV011            | ðŸ”„         |

---

## Security and Governance

### Permissions & APIs

|**Permission**|**Permission Name**|**APIs**|**Status**|
|---|---|---|---|
|device_view|View Device Information|DV001|ðŸ”„|
|device_manage|Manage Device Enrollment|DV002, DV003, DV004|ðŸ”„|
|device_certificate|Manage Device Certificates|DV003, DV004, DV005|ðŸ”„|
|device_transfer|Transfer Device Ownership|DV006, DV007|ðŸ”„|
|device_pin|Manage Device PIN|DV008, DV009, DV010, DV011|ðŸ”„|

---

### Roles & Permissions

|**Role**|**Role Name**|**Permissions**|**Status**|
|---|---|---|---|
|RP301|Device Administrator|device_view, device_manage, device_certificate, device_transfer, device_pin|ðŸ”„|
|RP302|Security Officer|device_view, device_manage, device_certificate|ðŸ”„|
|RP303|Standard User (Self)|device_view, device_manage, device_pin, device_transfer|ðŸ”„|
|RP304|Support Analyst|device_view|ðŸ”„|

---

### Policies & Attributes

|**Policy ID**|**Policy**|**Attribute / Condition**|**Status**|
|---|---|---|---|
|P_DEV_001|Users can only manage their own devices|`device.owner_id eq user.id`|ðŸ”„|
|P_DEV_002|Device activation requires valid session|`identity.session.valid eq true`|ðŸ”„|
|P_DEV_003|Certificate operations require security role|`role in ["RP301", "RP302"]`|ðŸ”„|
|P_DEV_004|Device transfers require recipient acceptance|`transfer.status eq "accepted"`|ðŸ”„|
|P_DEV_005|PIN changes require current PIN validation|`pin.validated eq true`|ðŸ”„|
|P_DEV_006|Certificate rotation triggers before expiration|`certificate.days_remaining <= 30`|ðŸ”„|
|P_DEV_007|Device ownership transfer cleans old preferences|`preferences.reset eq true`|ðŸ”„|

---

### Related Documents

1. **Device Enrollment Process Guide**
2. **Certificate Authority Integration Specifications**
3. **Device Security Standards**
4. **PIN Management Policy**
5. **Device Transfer Workflow**

---

âœ… - Complete  
ðŸ”„ - In Progress  
â° - Delayed  
ðŸš§ - In Testing  
âš ï¸ - Comments from Testing  
â›” - Failed Testing  
ðŸ“‹ - Planned for future release