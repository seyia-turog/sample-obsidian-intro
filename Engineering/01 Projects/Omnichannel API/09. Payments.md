---

## Status: Pending  
Thumbnail: "#EF5350"  
Description: Payment Processing & Fund Transfer Management  
Application: Retail Engine  
Due On: 2025-10-12T12:00:00

---

## Overview

The **Payments Module** handles all payment transactions and fund transfers in the digital banking platform.

It manages bill payments, account funding from cards and mobile wallets, intra-bank and inter-bank transfers, own account transfers, mobile wallet payments, loan repayments, and beneficiary management, integrating with Payment Processor, CBA Adapter, User Settings Utility, and Message Workers to ensure secure, accurate, and compliant payment operations.

---

## Core Business Functions

- **Bill Payments** â€“ Execute payments to billers using account funds with transaction holds and releases.
- **Account Funding** â€“ Transfer funds into savings accounts from cards and mobile wallets.
- **Internal Transfers** â€“ Move funds between accounts within the same bank or between user's own accounts.
- **External Transfers** â€“ Execute inter-bank transfers to accounts at different financial institutions.
- **Mobile Wallet Payments** â€“ Send funds from bank accounts to mobile wallet services.
- **Loan Repayments** â€“ Process scheduled or ad-hoc loan payments.
- **Beneficiary Management** â€“ List and manage saved recipients for various payment types.
- **Bank Listing** â€“ Retrieve available banks for internal and external transfers.

---

## Technical Dependencies

### Adapter & Processor Dependencies

|Adapter / Processor|Business Purpose|
|---|---|
|Processor (Payments)|Processes bill payments, inbound/outbound transactions, internal/external transfers, and provides bank lists.|
|CBA Adapter|Manages transaction holds, releases, reversals, withdrawals, and deposits for account balance operations.|
|User Settings Utility|Maintains beneficiary lists for external transfers, internal transfers, bill payments, and mobile wallets.|
|Util Worker (Messages)|Sends credit and debit notifications for all payment transactions.|

---

## REST Endpoints

### Omnichannel APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|PT001|Initiate Bills Payment|/payments/bills|POST|â€”|ğŸ”„|
|PT002|Fund Saving Account From Card|/payments/fund/via/card|POST|â€”|ğŸ”„|
|PT003|Fund Saving Account From Mobile Wallet|/payments/fund/via/mwallet|POST|â€”|ğŸ”„|
|PT004|Initiate Intra-Bank Transfer|/payments/transfer/internal|POST|â€”|ğŸ”„|
|PT005|Initiate Own Account Transfer|/payments/transfer/self|POST|â€”|ğŸ”„|
|PT006|Initiate Inter-Bank Transfer|/payments/transfer/external|POST|â€”|ğŸ”„|
|PT007|Initiate Mobile Wallet Payment|/payments/transfer/mwallet|POST|â€”|ğŸ”„|
|PT008|List Internal Destination Banks|/payments/banks/internal|GET|â€”|ğŸ”„|
|PT009|List External Destination Banks|/payments/banks/external|GET|â€”|ğŸ”„|
|PT010|List Beneficiaries of External Transfer|/payments/beneficiaries/external|GET|â€”|ğŸ”„|
|PT011|List Beneficiaries of Internal Transfer|/payments/beneficiaries/internal|GET|â€”|ğŸ”„|
|PT012|List Beneficiaries of Bills Payments|/payments/beneficiaries/bills|GET|â€”|ğŸ”„|
|PT013|List Beneficiaries for Mobile Wallet|/payments/beneficiaries/mwallet|GET|â€”|ğŸ”„|
|PT014|Initiate a Loan Repayment|/payments/loans/{loanId}|POST|â€”|ğŸ”„|

---

## Dependency Service APIs

### 1. Payment Processor APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|PP002|Process Bill Payment|/api/v1/bill-payments/pay|POST|PT001|ğŸ”„|
|PP003|Process Inbound Transaction|/api/v1/transfer/credit|POST|PT002, PT003, PT014|ğŸ”„|
|PP004|Process Transfer (Internal)|/api/v1/transfer|POST|PT004|ğŸ”„|
|PP005|Process Outbound Transfers||POST|PT006|ğŸ”„|
|PP005|Process Outbound Transfers|/api/v1/bill-payments/pay|POST|PT007|ğŸ”„|
|PP006|Get Bank List (Internal)|api/v1/transfer/banks|GET|PT008|ğŸ”„|
|PP007|Get Bank List (External)|api/v1/transfer/banks|GET|PT009|ğŸ”„|

---

### 2. CBA Adapter APIs

| **Action** | **Summary**                                     | **Route**                              | **Method** | **Operation ID**                  | **Status** |
| ---------- | ----------------------------------------------- | -------------------------------------- | ---------- | --------------------------------- | ---------- |
| CB026      | Hold Transaction Amount                         | /api/v1/accounts/savings/3/hold        | POST       | PT001, PT006, PT007               | ğŸ”„         |
| CB027      | Release Transaction Amount                      | /api/v1/accounts/savings/2/release/147 | POST       | PT001, PT006, PT007               | ğŸ”„         |
| CB028      | Reverse Transaction Amount                      | /api/v1/accounts/savings/3/reverse/31  | POST       | PT001, PT006, PT007               | ğŸ”„         |
| CB029      | Withdraw Transaction Amount                     | /api/v1/savings/accounts/withdraw      | POST       | PT001, PT004, PT005, PT006, PT007 | ğŸ”„         |
| CB030      | Deposit Transaction Amount (Update CBA Account) | /savings/accounts/deposit              | POST       | PT002, PT003, PT014               | ğŸ”„         |

---

### 3. User Settings Utility APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|SU010|List Beneficiaries of External Transfer||GET|PT010|ğŸ”„|
|SU011|List Beneficiaries of Internal Transfer||GET|PT011|ğŸ”„|
|SU012|List Beneficiaries of Bills Payments||GET|PT012|ğŸ”„|
|SU013|List Beneficiaries for Mobile Wallet||GET|PT013|ğŸ”„|

---

### 4. Notification Worker APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|UM027|Send Credit and Debit Notification|/api/v1/messages/debits|POST|PT001, PT006, PT007|ğŸ”„|
|UM027|Send Credit and Debit Notification|/savings/accounts/deposit|POST|PT002|ğŸ”„|
|UM027|Send Credit and Debit Notification|/api/v1/messages/credit|POST|PT003, PT004|ğŸ”„|
|UM027|Send Credit and Debit Notification|/api/v1/messages/dedit|POST|PT005|ğŸ”„|
|UM027|Send Credit and Debit Notification|/savings/accounts/deposit|POST|PT014|ğŸ”„|

---

## Security and Governance

### Permissions & APIs

|**Permission**|**Permission Name**|**APIs**|**Status**|
|---|---|---|---|
|payment_bills|Make Bill Payments|PT001|ğŸ”„|
|payment_fund|Fund Accounts|PT002, PT003|ğŸ”„|
|payment_transfer|Make Transfers|PT004, PT005, PT006, PT007|ğŸ”„|
|payment_loan|Make Loan Repayments|PT014|ğŸ”„|
|payment_view_banks|View Bank Lists|PT008, PT009|ğŸ”„|
|payment_beneficiaries|View Beneficiaries|PT010, PT011, PT012, PT013|ğŸ”„|

---

### Roles & Permissions

|**Role**|**Role Name**|**Permissions**|**Status**|
|---|---|---|---|
|RP1001|Account Holder|payment_bills, payment_fund, payment_transfer, payment_loan, payment_view_banks, payment_beneficiaries|ğŸ”„|
|RP1002|Payment Operator|payment_bills, payment_transfer, payment_view_banks|ğŸ”„|
|RP1003|View Only User|payment_view_banks, payment_beneficiaries|ğŸ”„|
|RP1004|Corporate Treasurer|payment_bills, payment_transfer, payment_loan, payment_beneficiaries|ğŸ”„|

---

### Policies & Attributes

|**Policy ID**|**Policy**|**Attribute / Condition**|**Status**|
|---|---|---|---|
|P_PAY_001|Users can only initiate payments from own accounts|`account.owner_id eq user.id`|ğŸ”„|
|P_PAY_002|Payment amounts must not exceed available balance|`payment.amount <= account.balance`|ğŸ”„|
|P_PAY_003|High-value transfers require additional approval|`transfer.amount > threshold`|ğŸ”„|
|P_PAY_004|Transaction holds must be released or reversed|`hold.status in ["released", "reversed"]`|ğŸ”„|
|P_PAY_005|Inter-bank transfers require valid beneficiary|`beneficiary.verified eq true`|ğŸ”„|
|P_PAY_006|Failed transactions must be automatically reversed|`transaction.failed eq true`|ğŸ”„|
|P_PAY_007|Loan repayments must match active loan account|`loan.status eq "active"`|ğŸ”„|

---

### Related Documents

1. **Payment Processing Workflow Guide**
2. **Transaction Hold & Release Procedures**
3. **Inter-Bank Transfer Integration Specifications**
4. **Bill Payment Provider Catalog**
5. **Beneficiary Management Standards**
6. **Mobile Wallet Integration Guide**

---

âœ… - Complete  
ğŸ”„ - In Progress  
â° - Delayed  
ğŸš§ - In Testing  
âš ï¸ - Comments from Testing  
â›” - Failed Testing  
ğŸ“‹ - Planned for future release