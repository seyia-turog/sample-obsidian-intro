
**Status:** In Progress  
**Thumbnail:** `#6A9BFF`  
**Description:** User onboarding, identity, compliance & profile management  
**Application:** Retail Engine  
**Due On:** 2025-10-20T12:00:00

---

## Overview

The **Users API Module** manages user identity creation, verification, compliance document processing, banking account provisioning, profile updates, messaging and user settings. It integrates Identity, CBA, CRM, Messaging, Documents and User Settings components to provide end-to-end onboarding and profile management.

---

## Core Business Functions

- User Onboarding & Identity creation  
- Identity verification (BVN/NIN, OTP)  
- Compliance & KYC document handling  
- Banking account creation & payment method init  
- Profile updates, avatar and preferences  
- User messages retrieval

---

## Technical Dependencies

| Component |
|-----------|
| Identity Processor |
| Identity Adapter |
| Core Banking Adapter (CBA) |
| Payments Processor |
| CRM Adapter |
| Messages Worker |
| Documents Processor |
| User Settings Utility |

---

# REST Endpoints

## 1. User Onboarding APIs

| Code   | Summary                           | Route                                      | Method | Status |
|--------|-----------------------------------|--------------------------------------------|--------|--------|
| UA001  | Onboard New User                   | /users/profile                             | POST   | ðŸ”„     |
| UA002  | Lookup Existing User               | /users/profile/by/{accountNo}              | GET    | ðŸ”„     |
| UA003  | Onboard Existing User (Create Account) | /users/profile/by/{accountNo}          | POST   | ðŸ”„     |
| UA004  | Trigger Identity Verification      | /users/identity/lookup                     | POST   | ðŸ”„     |
| UA005  | Resend Verification Code           | /users/identity/resend-code                | POST   | ðŸ”„     |
| UA006  | Confirm Identity Verification      | /users/identity/confirm                    | POST   | ðŸ”„     |
| UA007  | Upload Compliance Document         | /users/documents/compliance                | POST   | ðŸ”„     |
| UA008  | Upload Identity Document           | /users/documents/identification            | POST   | ðŸ”„     |
| UA009  | Upload Profile Picture             | /users/profile/avatar                      | POST   | ðŸ”„     |
| UA010  | Trigger Email Verification         | /users/email/verify                        | POST   | ðŸ”„     |

---

## 2. User Profile APIs

| Code   | Summary                           | Route                                      | Method | Status |
|--------|-----------------------------------|--------------------------------------------|--------|--------|
| UP001  | View User Profile                 | /users/profile/my                          | GET    | ðŸ”„     |
| UP002  | View User Avatar                  | /users/profile/avatar                      | GET    | ðŸ”„     |
| UP003  | Update User Attributes            | /users/claims/my                           | PUT    | ðŸ”„     |

---

## 3. User Messages APIs

| Code  | Summary             | Route                        | Method | Status |
| ----- | ------------------- | ---------------------------- | ------ | ------ |
| UM001 | List User Messages  | /users/messages              | GET    | ðŸ”„     |
| UM002 | Delete User Message | /users/messages/{message_id} | DELETE | ðŸ”„     |

---

## 4. Identity Adapter APIs

| Code   | Summary                           | Route                                      | Method | Status |
|--------|-----------------------------------|--------------------------------------------|--------|--------|
| ID001  | Create Identity Stub              | /identity/users (internal)                 | POST   | ðŸ”„     |
| ID002  | Fetch Identity Data               | /identity/users/{id} (internal)            | GET    | ðŸ”„     |
| ID003  | Update Identity Claims            | /identity/users/{id}/claims (internal)     | PUT    | ðŸ”„     |
| ID004  | Mark Identity Verified            | /identity/verify/{session} (internal)      | POST   | ðŸ”„     |

---

## 5. Core Banking Adapter (CBA) APIs

| Code   | Summary                           | Route                                      | Method | Status |
|--------|-----------------------------------|--------------------------------------------|--------|--------|
| CB001  | Create Banking Account            | /cba/accounts (internal)                   | POST   | ðŸ”„     |
| CB002  | Get Account Status                | /cba/accounts/{accountId}/status           | GET    | ðŸ”„     |
| CB003  | Initialize Payment Methods        | /cba/accounts/{accountId}/payments/init    | POST   | ðŸ”„     |

---

## 6. Payments Processor APIs

| Code   | Summary                           | Route                                      | Method | Status |
|--------|-----------------------------------|--------------------------------------------|--------|--------|
| PP001  | Initialize Payment Methods        | /payments/methods/init                      | POST   | ðŸ”„     |
| PP002  | Process Onboarding Fee (if any)   | /payments/charge/onboarding                 | POST   | ðŸ”„     |

---

## 7. CRM Adapter APIs

| Code   | Summary                           | Route                                      | Method | Status |
|--------|-----------------------------------|--------------------------------------------|--------|--------|
| CR001  | Create CRM Record                 | /crm/clients (internal)                    | POST   | ðŸ”„     |
| CR002  | Update CRM with Account Details   | /crm/clients/{clientId}/accounts           | PUT    | ðŸ”„     |
| CR003  | Enrich Profile Data               | /crm/clients/{clientId}/enrich             | PUT    | ðŸ”„     |

---

## 8. Messages Worker APIs

| Code  | Summary                         | Route                        | Method | Status |
| ----- | ------------------------------- | ---------------------------- | ------ | ------ |
| MW001 | Send Welcome & Verification Msg | /messages/send/welcome       | POST   | ðŸ”„     |
| MW002 | Send OTP / Verification Code    | /messages/send/otp           | POST   | ðŸ”„     |
| MW003 | Send Account Ready Notification | /messages/send/account-ready | POST   | ðŸ”„     |
| MW004 | Remove Message Notification     | /messages/notify/delete      | POST   | ðŸ”„     |

---

## 9. Documents Processor APIs

| Code   | Summary                           | Route                                      | Method | Status |
|--------|-----------------------------------|--------------------------------------------|--------|--------|
| DP001  | Store Compliance Document         | /documents/compliance                      | POST   | ðŸ”„     |
| DP002  | Store Identity Document           | /documents/identification                  | POST   | ðŸ”„     |
| DP003  | Serve Avatar Image                | /documents/avatar/{id}                     | GET    | ðŸ”„     |

---

## 10. User Settings Utility APIs

| Code   | Summary                           | Route                                      | Method | Status |
|--------|-----------------------------------|--------------------------------------------|--------|--------|
| US001  | Set Basic User Preferences        | /users/settings/defaults                   | POST   | ðŸ”„     |
| US002  | Update User Preferences           | /users/settings/{userId}                   | PUT    | ðŸ”„     |

---

## Security & Governance (quick reference)

| Permission | APIs (examples) |
|------------|------------------|
| **usr_onboard** | UA001, UA003, UA004 |
| **usr_read**    | UP001, UA002       |
| **usr_update**  | UP003, US002       |
| **usr_docs**    | UA007, UA008       |
| **usr_messages**| UM001, MW001       |

---
