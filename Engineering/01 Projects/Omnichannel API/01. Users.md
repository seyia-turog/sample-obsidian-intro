---
Thumbnail: "#64B5F6"
Description: User Identity, Profile & compliant document management
Application: Omnichannel API
Due On: 2025-12-12T12:00:00
---

## Overview

The **User Management Module** handles the complete lifecycle of user accounts in the digital banking platform.

It manages user onboarding, identity verification, profile management, document uploads, and messaging, integrating with Identity, CBA, CRM, and various processors to ensure secure, compliant, and seamless user experiences.

---

## Core Business Functions

- **User Onboarding** â€“ Register new users and onboard existing account holders.
- **Identity Verification** â€“ Verify user identity using country-specific documents (BVN, NIN, SSN, VIN).
- **Profile Management** â€“ View and update user profile information and attributes.
- **Document Management** â€“ Handle compliance documents, identity documents, and profile pictures.
- **Communication** â€“ Send verification codes, welcome messages, and manage user notifications.
- **Email Verification** â€“ Validate user email address ownership.

---

## Technical Dependencies

### Adapter & Processor Dependencies

| Adapter / Processor    | Business Purpose                                                                                           |
| ---------------------- | ---------------------------------------------------------------------------------------------------------- |
| Identity Adapter       | Manages user accounts, authentication, verification codes, and email validation.                           |
| CBA Adapter            | Creates and manages client accounts, activates accounts, and handles compliance documents in Core Banking. |
| CRM Adapter            | Synchronizes partner/customer profiles and manages user messages.                                          |
| Util Worker (Messages) | Sends OTPs, welcome messages, verification emails, and notifications.                                      |
| Processor (Identity)   | Validates identity documents and compliance status.                                                        |
| Processor (Documents)  | Stores and retrieves compliance documents, ID documents, and profile images.                               |

---

## REST Endpoints

### Omnichannel APIs

| **Action** | **Summary**                   | **Route**                       | **Method** | **Operation ID**            | **Status** |
| ---------- | ----------------------------- | ------------------------------- | ---------- | --------------------------- | ---------- |
| US001      | Onboard New User              | /users/profile                  | POST       | onboardNewUser              | ğŸ”„         |
| US002      | Lookup Existing User          | /users/profile/by/{accountNo}   | GET        | lookupExistingUser          | ğŸ”„         |
| US003      | Onboard Existing User         | /users/profile/by/{accountNo}   | POST       | onboardExistingUser         | ğŸ”„         |
| US004      | Trigger Identity Verification | /users/identity/lookup          | POST       | triggerIdentityVerification | ğŸ”„         |
| US005      | Resend Verification Code      | /users/identity/resend-code     | POST       | resendVerificationCode      | ğŸ”„         |
| US006      | Confirm Identity Verification | /users/identity/confirm         | POST       | confirmIdentityVerification | ğŸ”„         |
| US007      | Upload Compliance Documents   | /users/documents/compliance     | POST       | uploadcComplianceDocuments  | ğŸ”„         |
| US008      | Upload Identity Documents     | /users/documents/identification | POST       | uploadIdentityDocuments     | ğŸ”„         |
| US009      | Upload Profile Picture        | /users/profile/avatar           | POST       | uploadIdentityDocuments     | ğŸ”„         |
| US010      | Trigger Email Verification    | /users/email/verify             | POST       | triggerEmailVerification    | ğŸ”„         |
| US011      | View User Profile             | /users/profile/my               | GET        | viewUserProfile             | ğŸ”„         |
| US012      | View User Avatar              | /users/profile/avatar           | GET        | ViewUserAvatar              | ğŸ”„         |
| US013      | Update User Attributes        | /users/claims/my                | PUT        | updateUserAttributes        | ğŸ”„         |
| US014      | List User Messages            | /users/messages                 | GET        | listUserMessages            | ğŸ”„         |
| US015      | Delete User Message           | /users/messages/{messageId}     | DELETE     | deleteUserMessage           | ğŸ”„         |

---

## Dependency Service APIs

### 1. Identity Adapter APIs

| **Action** | **Summary**                         | **Route**                                          | **Method** | **Operation ID** | **Status** |
| ---------- | ----------------------------------- | -------------------------------------------------- | ---------- | ---------------- | ---------- |
| AI001      | Create User in Identity System      | /api/v1/users                                      | POST       | US001            | ğŸ”„         |
| AI033      | Fetch User Profile                  | /api/v1/users/{id}                                 | GET        | US011            | ğŸ”„         |
| AI003      | Create OTP Code                     | /api/v1/otp/{userId}/generate                      | POST       | US004            | ğŸ”„         |
| AI004      | Regenerate OTP Code                 | /api/v1/otp/{userId}/regenerate                    | POST       | US005            | ğŸ”„         |
| AI005      | Validate OTP Code                   | /api/v1/otp/{userId}/verify                        | POST       | US006            | ğŸ”„         |
| AI007      | Create Email Verification Challenge | /api/v1/users/{userId}/email-verification/generate | POST       | US010            | ğŸ”„         |
| AI009      | Update Identity Claims              | /api/v1/users/{id}                                 | PUT        | US013            | ğŸ”„         |


---

### 2. CBA Adapter APIs

| **Action** | **Summary**                        | **Route**                                        | **Method** | **Operation ID** | **Status** |
| ---------- | ---------------------------------- | ------------------------------------------------ | ---------- | ---------------- | ---------- |
| CB001      | Create Client in CBA               | /api/v1/clients/{type}                           | POST       | US001            | ğŸ”„         |
| CB002      | Get Individual Client by ID        | /api/v1/clients/{type}/{clientId}                | GET        | US011            | ğŸ”„         |
| CB003      | Lookup Client by Account Number    | /api/v1/clients/account/{{accountNumber}}        | GET        | US002            | ğŸ”„         |
| CB004      | Create Client OTP                  | /api/v1/clients/{clientId}/otp                   | POST       | US003            | ğŸ”„         |
| CB005      | Activate Client Account            | /api/v1/clients/{clientId}/activate/{type}       | POST       | US006            | ğŸ”„         |
| CB006      | Create Client Compliance Document  | /api/v1/clients/{clientId}/document/{documentId} | POST       | US007, US008     | ğŸ”„         |
| CB007      | Update Client Compliance Documentt | /api/v1/clients/{clientId}/document/{documentId} | PUT        |                  | ğŸ”„         |
| CB008      | Remove Client Compliance Document  | /api/v1/clients/{clientId}/document/{documentId} | DELETE     |                  | ğŸ”„         |
| CB009      | Get Compliance Document            | /api/v1/clients/{clientId}/document              | GET        |                  | ğŸ”„         |
| CB010      | Update Client Avatar Reference URL | TBD                                              | PUT        | US009            | ğŸ”„         |
| CB011      | Update Client Profile in CBA       | /api/v1/clients/{clietID}/{type}                 | PUT        | US013            | ğŸ”„         |
| CB012      | Get Client OTP                     | /api/v1/clients/{clientId}/otp                   | GET        |                  | ğŸ”„         |
| CB013      | Update Client OTP                  | /api/v1/clients/{clientId}/otp                   | PUT        |                  |            |



---

### 3. CRM Adapter APIs

| **Action** | **Summary**                   | **Route**                                 | **Method** | **Operation ID** | **Status** |
| ---------- | ----------------------------- | ----------------------------------------- | ---------- | ---------------- | ---------- |
| CR001      | Create Partner in CRM         | /api/v1/stakeholders/{type}               | POST       | US001            | ğŸ”„         |
| CR004      | Fetch Partner CRM Record      | /api/v1/stakeholders/{type}/{communityId} | GET        | US011            | ğŸ”„         |
| CR005      | Update Partner Profile in CRM | TBD                                       | PUT        | US013            | ğŸ”„         |


---

### 4. Messages Processor APIs

| **Action** | **Summary**                         | **Route**                   | **Method** | **Operation ID** | **Status** |
| ---------- | ----------------------------------- | --------------------------- | ---------- | ---------------- | ---------- |
| UM001      | Send Welcome Message                | /api/v1/messages/welcome    | POST       | US001, US003     | ğŸ”„         |
| UM002      | Send OTP                            | /api/v1/messages/otp/send   | POST       | US004,US003      | ğŸ”„         |
| UM005      | Resend OTP for Message Not Received | /api/v1/messages/otp/resend | POST       | US005            | ğŸ”„         |
| UM006      | Send Verification Success Message   | TBD                         | POST       | US006            | ğŸ”„         |
| UM007      | Send Email Verification Code        | TBD                         | POST       | US010            | ğŸ”„         |

---

### 5. Identity Processor APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|PI001|Verify Identity Status & Compliance|/api/v1/identity-verification/type|POST|US004|ğŸ”„|

---

### 6. Document Processor APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|PD001|Process & Store Compliance Documents|/api/v1/documents/upload|POST|US007|ğŸ”„|
|PD006|Process Compliance Documents|/api/v1/documents/process|POST|US007|ğŸ”„|
|PD007|Store Compliance Documents|TBD|POST|US007|ğŸ”„|
|PD002|Store KYC Document|/api/v1/documents/upload|POST|US008|ğŸ”„|
|PD008|Process KYC Document|/api/v1/documents/process|POST|US008|ğŸ”„|
|PD003|Process & Store Image|TBD|POST|US009|ğŸ”„|
|PD004|Serve Image File|TBD|GET|US012|ğŸ”„|

### 7. Message Utility APIs

| **Action** | **Summary**             | **Route** | **Method** | **Operation ID** | **Status** |
| ---------- | ----------------------- | --------- | ---------- | ---------------- | ---------- |
| MS001      | Fetch User Messages     | TBD       | GET        | US014            | ğŸ”„         |
| MS002      | Mark Message as Deleted | TBD       | DELETE     | US015            | ğŸ”„         |



---

## Security and Governance

### Permissions & APIs

|**Permission**|**Permission Name**|**APIs**|**Status**|
|---|---|---|---|
|user_create|Create User Accounts|US001, US003|ğŸ”„|
|user_view|View User Information|US002, US011, US012, US014|ğŸ”„|
|user_update|Update User Profile|US013|ğŸ”„|
|user_verify|Verify User Identity|US004, US005, US006, US010|ğŸ”„|
|user_docs|Manage User Documents|US007, US008, US009|ğŸ”„|
|user_messages|Manage User Messages|US014, US015|ğŸ”„|

---

### Roles & Permissions

|**Role**|**Role Name**|**Permissions**|**Status**|
|---|---|---|---|
|RP101|System Administrator|user_create, user_view, user_update, user_verify, user_docs, user_messages|ğŸ”„|
|RP102|Customer Support|user_view, user_verify, user_messages|ğŸ”„|
|RP103|KYC Officer|user_view, user_verify, user_docs|ğŸ”„|
|RP104|Standard User (Self)|user_view, user_update, user_verify, user_docs, user_messages|ğŸ”„|

---

### Policies & Attributes

|**Policy ID**|**Policy**|**Attribute / Condition**|**Status**|
|---|---|---|---|
|P_USER_001|Users can only view and update their own profile|`user.id eq authenticated_user.id`|ğŸ”„|
|P_USER_002|Identity verification requires valid session|`identity.session.valid eq true`|ğŸ”„|
|P_USER_003|Document uploads require KYC permissions|`role in ["RP103", "RP104"]`|ğŸ”„|
|P_USER_004|User creation requires system admin role|`role in ["RP101"]`|ğŸ”„|
|P_USER_005|Message deletion limited to message owner|`message.owner_id eq user.id`|ğŸ”„|

---

### Related Documents

1. **User Onboarding Process Guide**
2. **Identity Verification Standards**
3. **KYC/AML Compliance Requirements**
4. **Document Upload Specifications**
5. **CBA Integration Schema**

---

âœ… - Complete  
ğŸ”„ - In Progress  
â° - Delayed  
ğŸš§ - In Testing  
âš ï¸ - Comments from Testing  
â›” - Failed Testing  
ğŸ“‹ - Planned for future release