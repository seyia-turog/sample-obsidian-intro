---

## Status: Pending  
Thumbnail: "#FFB74D"  
Description: Loan Account & Application Management  
Application: Retail Engine  
Due On: 2025-10-12T12:00:00

---

## Overview

The **Loan Management Module** handles the complete lifecycle of loan accounts and applications in the digital banking platform.

It manages loan accounts, guarantors, repayment schedules, transactions, charges, and the entire loan application workflow from submission through approval/rejection to disbursement, integrating with CBA, CRM, Identity Processor, Document Processor, and Message Workers to ensure secure, compliant, and efficient loan operations.

---

## Core Business Functions

- **Loan Account Management** â€“ View, update, and close loan accounts with full transaction history.
- **Repayment Management** â€“ Generate and track loan repayment schedules and transactions.
- **Guarantor Management** â€“ Add, remove, and list loan guarantors with relationship tracking.
- **Loan Application Processing** â€“ Submit, review, approve, or reject loan applications.
- **Loan Disbursement** â€“ Process approved loan disbursements to customer accounts.
- **Loan Charges & Status** â€“ Apply charges and update loan status with notifications.

---

## Technical Dependencies

### Adapter & Processor Dependencies

|Adapter / Processor|Business Purpose|
|---|---|
|CBA Adapter|Manages loan accounts, applications, guarantors, schedules, transactions, charges, approvals, rejections, and disbursements.|
|CRM Adapter|Tracks guarantor relationships and maintains loan application status updates.|
|Identity Processor|Provides risk profiles for loan application reviews.|
|Processor (Documents)|Stores loan application documents, guarantor documents, and retrieves them for review.|
|Util Worker (Messages)|Sends loan-related notifications including updates, closures, guarantor requests, status changes, charges, approvals, rejections, and disbursements.|

---

## REST Endpoints

### Loan Management APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|LN001|Loan Accounts|/loans/account|GET|â€”|ğŸ”„|
|LN002|Update Loan Account|/loans/account/{loan_id}|PUT|â€”|ğŸ”„|
|LN003|Loan Account Details|/loans/account/{loan_id}|GET|â€”|ğŸ”„|
|LN004|Loan Repayment Schedule|/loans/account/schedule/{loan_id}|GET|â€”|ğŸ”„|
|LN005|Loan Account Transactions|/loans/account/transactions/{loan_id}|GET|â€”|ğŸ”„|
|LN006|Close Loan Account|/loans/account/close/{loan_id}|DELETE|â€”|ğŸ”„|
|LN007|Add Loan Guarantor|/loans/account/guarantors|POST|â€”|ğŸ”„|
|LN008|Remove Loan Guarantor|/loans/account/guarantors/{guarantor_id}/{loan_id}|DELETE|â€”|ğŸ”„|
|LN009|List Loan Guarantor|/loans/account/guarantors-list/{loan_id}|GET|â€”|ğŸ”„|
|LN010|Update Loan Status|/loans/account/status|PUT|â€”|ğŸ”„|
|LN011|Loan Charges|/loans/account/charges|POST|â€”|ğŸ”„|
|LN012|Submit Loan Application|/loans/applications|POST|â€”|ğŸ”„|
|LN013|List Loan Applications|/loan/applications|GET|â€”|ğŸ”„|
|LN014|Review Loan Application|/loan/applications/review|PUT|â€”|ğŸ”„|
|LN015|Approve Loan|/loans/applications/approve|POST|â€”|ğŸ”„|
|LN016|Reject Loan|/loan/applications/reject|POST|â€”|ğŸ”„|
|LN017|Disburse Loan|/loans/application/disburse|POST|â€”|ğŸ”„|

---

## Dependency Service APIs

### 1. CBA Adapter APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|CB011|Retrieve Loan Accounts||GET|LN001|ğŸ”„|
|CB012|Update Loan Parameters||PUT|LN002|ğŸ”„|
|CB013|Retrieve Loan Details||GET|LN003|ğŸ”„|
|CB014|Generate Repayment Schedule||GET|LN004|ğŸ”„|
|CB015|Retrieve Loan Transactions||GET|LN005|ğŸ”„|
|CB016|Close Account||DELETE|LN006|ğŸ”„|
|CB017|Add Guarantor||POST|LN007|ğŸ”„|
|CB018|Remove Guarantor||DELETE|LN008|ğŸ”„|
|CB019|Retrieve Guarantors||GET|LN009|ğŸ”„|
|CB020|Update Loan Status||PUT|LN010|ğŸ”„|
|CB021|Apply Loan Charge||POST|LN011|ğŸ”„|
|CB022|Create Loan Application||POST|LN012|ğŸ”„|
|CB023|Retrieve Loan Applications||GET|LN013|ğŸ”„|
|CB024|Retrieve Financial Data||PUT|LN014|ğŸ”„|
|CB025|Create Loan Account||POST|LN015|ğŸ”„|
|CB026|Reject Loan||POST|LN016|ğŸ”„|
|CB027|Hold Loan Amount in Bank Ledger||POST|LN017|ğŸ”„|

---

### 2. CRM Adapter APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|CR008|Update Relationship||POST|LN007|ğŸ”„|
|CR009|Update Relationship||DELETE|LN008|ğŸ”„|
|CR010|Update CRM Status||POST|LN015|ğŸ”„|
|CR011|Update CRM Status||POST|LN016|ğŸ”„|

---

### 3. Identity Processor APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|PI002|Get Risk Profile||PUT|LN014|ğŸ”„|

---

### 4. Document Processor APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|PD008|Store Guarantor Docs||POST|LN007|ğŸ”„|
|PD009|Store Loan Application Docs||POST|LN012|ğŸ”„|
|PD010|Get Application Docs||PUT|LN014|ğŸ”„|

---

### 5. Notification Worker APIs

|**Action**|**Summary**|**Route**|**Method**|**Operation ID**|**Status**|
|---|---|---|---|---|---|
|UM018|Send Update Notification||PUT|LN002|ğŸ”„|
|UM019|Send Loan Account Closure Notification||DELETE|LN006|ğŸ”„|
|UM020|Send Guarantor Request||POST|LN007|ğŸ”„|
|UM021|Send Removal Notification||DELETE|LN008|ğŸ”„|
|UM022|Send Loan Status Updated Notification||PUT|LN010|ğŸ”„|
|UM023|Send Charge Notification||POST|LN011|ğŸ”„|
|UM024|Send Loan Rejection Notice||POST|LN015|ğŸ”„|
|UM025|Send Loan Rejection Notice||POST|LN016|ğŸ”„|
|UM026|Send Loan Disbursal Notification||POST|LN017|ğŸ”„|

---

## Security and Governance

### Permissions & APIs

|**Permission**|**Permission Name**|**APIs**|**Status**|
|---|---|---|---|
|loan_view|View Loan Information|LN001, LN003, LN004, LN005, LN009, LN013|ğŸ”„|
|loan_manage|Manage Loan Accounts|LN002, LN010, LN011|ğŸ”„|
|loan_close|Close Loan Accounts|LN006|ğŸ”„|
|loan_guarantor|Manage Loan Guarantors|LN007, LN008, LN009|ğŸ”„|
|loan_apply|Submit Loan Applications|LN012|ğŸ”„|
|loan_review|Review Loan Applications|LN014|ğŸ”„|
|loan_approve|Approve/Reject Loans|LN015, LN016|ğŸ”„|
|loan_disburse|Disburse Approved Loans|LN017|ğŸ”„|

---

### Roles & Permissions

|**Role**|**Role Name**|**Permissions**|**Status**|
|---|---|---|---|
|RP701|Loan Officer|loan_view, loan_manage, loan_guarantor, loan_review, loan_approve, loan_disburse|ğŸ”„|
|RP702|Credit Analyst|loan_view, loan_review|ğŸ”„|
|RP703|Loan Applicant (Self)|loan_view, loan_apply, loan_guarantor|ğŸ”„|
|RP704|Customer Support|loan_view|ğŸ”„|
|RP705|Finance Manager|loan_view, loan_manage, loan_approve, loan_disburse, loan_close|ğŸ”„|

---

### Policies & Attributes

|**Policy ID**|**Policy**|**Attribute / Condition**|**Status**|
|---|---|---|---|
|P_LOAN_001|Users can only view their own loan accounts|`loan.owner_id eq user.id`|ğŸ”„|
|P_LOAN_002|Loan approval requires credit review completion|`application.review_status eq "completed"`|ğŸ”„|
|P_LOAN_003|Disbursement only for approved loans|`loan.status eq "approved"`|ğŸ”„|
|P_LOAN_004|Guarantor addition requires consent|`guarantor.consent eq true`|ğŸ”„|
|P_LOAN_005|Loan closure requires zero outstanding balance|`loan.balance eq 0`|ğŸ”„|
|P_LOAN_006|High-value loans require additional approval|`loan.amount > threshold`|ğŸ”„|
|P_LOAN_007|Loan rejection requires documented reason|`rejection.reason.length > 0`|ğŸ”„|

---

### Related Documents

1. **Loan Application Processing Guide**
2. **Credit Risk Assessment Framework**
3. **Loan Disbursement Procedures**
4. **Guarantor Management Policy**
5. **Loan Account Lifecycle Documentation**

---

âœ… - Complete  
ğŸ”„ - In Progress  
â° - Delayed  
ğŸš§ - In Testing  
âš ï¸ - Comments from Testing  
â›” - Failed Testing  
ğŸ“‹ - Planned for future release