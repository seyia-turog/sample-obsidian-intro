---
Status: Pending  
Thumbnail: "#FFCC80"  
Description: Transaction Recurrence, Tagging, Reversal & Dispute Services  
Application: Retail Engine  
Due On: 2025-10-09T12:00:00  
---

---

## Overview

The **Transactions Management Module** enables users to automate, categorize, reverse, and dispute transactions within the ADIBA ecosystem.  
It provides capabilities for setting recurring payments, managing personal finance tags, undoing completed transactions, and initiating disputes with full auditability.

The module integrates closely with Identity, CBA Core Banking, CRM systems, Document Services, and Notification Workers to maintain financial accuracy, regulatory compliance, and clear user communication.

---

### Core Business Functions

- **Recurring Payment Management** â€“ Convert one-time transactions into automated recurring schedules.  
- **Personal Finance Tagging** â€“ Create, update, delete, and apply transaction tags for budgeting.  
- **Transaction Reversal** â€“ Undo eligible transactions and restore funds.  
- **Dispute Resolution** â€“ Initiate claims for unauthorized or incorrect charges.  
- **Notifications & Documentation** â€“ Send confirmations and store regulatory financial documents.  

---

## Technical Dependencies

### Adapter & Processor Dependencies

| Adapter / Processor         | Business Purpose |
| ---------------------------- | ---------------- |
| Identity Adapter             | Validates session, tag ownership, and transaction ownership. |
| CBA Adapter                  | Updates transaction status, verifies eligibility, manages reversals & disputes. |
| Payments Processor           | Executes recurring schedules and reversal logic. |
| CRM Adapter                 | Updates categorization, dispute tickets, recurring activities. |
| Util Worker (Messages)       | Sends confirmations for reversals, disputes, recurring setups, and tag updates. |
| Document Processor           | Stores reversal and dispute documentation. |
| User Settings Utility        | Updates tag, finance, and recurring payment preferences. |

---

## REST Endpoints

### 1. Transaction Management APIs

| **Action** | **Summary** | **Route** | **Method** | **Status** |
| ---------- | ----------- | ---------- | ---------- | ---------- |
| TRX001 | Set Transaction as Recurring | /transactions/{transactionId}/recurring | POST | ğŸ”„ |
| TRX002 | List Transaction Tags | /transactions/tags | GET | ğŸ”„ |
| TRX003 | Create Transaction Tag | /transactions/tags | POST | ğŸ”„ |
| TRX004 | Update Transaction Tag | /transactions/tags/{tagId} | PUT | ğŸ”„ |
| TRX005 | Delete Transaction Tag | /transactions/tags/{tagId} | DELETE | ğŸ”„ |
| TRX006 | Tag Transaction | /transactions/{transactionId}/tag | POST | ğŸ”„ |
| TRX007 | Undo Transaction | /transactions/{transactionId}/reverse | POST | ğŸ”„ |
| TRX008 | Dispute Transaction | /transactions/{transactionId}/dispute | POST | ğŸ”„ |

---

### 2. Identity Adapter APIs

| **Action** | **Summary** | **Route** | **Method** | **Operation ID** | **Status** |
| ---------- | ----------- | --------- | ---------- | ---------------- | ---------- |
| IA001 | Validate Transaction Ownership | â€” | POST | TRX001, TRX006, TRX007, TRX008 | ğŸ”„ |
| IA002 | Validate User Session | â€” | POST | TRX002, TRX003 | ğŸ”„ |
| IA003 | Validate Tag Ownership | â€” | POST | TRX004, TRX005 | ğŸ”„ |

---

### 3. CBA Adapter APIs

| **Action** | **Summary** | **Route** | **Method** | **Operation ID** | **Status** |
| ---------- | ----------- | --------- | ---------- | ---------------- | ---------- |
| CBA001 | Mark Transaction as Recurring | â€” | POST | TRX001 | ğŸ”„ |
| CBA002 | Fetch Transaction Tags | â€” | GET | TRX002 | ğŸ”„ |
| CBA003 | Create Tag in CBA | â€” | POST | TRX003 | ğŸ”„ |
| CBA004 | Update Tag in CBA | â€” | PUT | TRX004 | ğŸ”„ |
| CBA005 | Remove Tag From CBA | â€” | DELETE | TRX005 | ğŸ”„ |
| CBA006 | Apply Tags to Transaction | â€” | POST | TRX006 | ğŸ”„ |
| CBA007 | Verify Reversal Eligibility | â€” | POST | TRX007 | ğŸ”„ |
| CBA008 | Create Dispute Case | â€” | POST | TRX008 | ğŸ”„ |

---

### 4. Payments Processor APIs

| **Action** | **Summary** | **Route** | **Method** | **Operation ID** | **Status** |
| ---------- | ----------- | --------- | ---------- | ---------------- | ---------- |
| PAY001 | Schedule Recurring Payment | â€” | POST | TRX001 | ğŸ”„ |
| PAY002 | Process Transaction Reversal | â€” | POST | TRX007 | ğŸ”„ |
| PAY003 | Initiate Dispute With Payment Network | â€” | POST | TRX008 | ğŸ”„ |

---

### 5. CRM Adapter APIs

| **Action** | **Summary** | **Route** | **Method** | **Operation ID** | **Status** |
| ---------- | ----------- | --------- | ---------- | ---------------- | ---------- |
| CRM001 | Update Recurring Activity | â€” | POST | TRX001 | ğŸ”„ |
| CRM002 | Update User Preferences | â€” | POST | TRX003 | ğŸ”„ |
| CRM003 | Update Tag References | â€” | POST | TRX004, TRX005 | ğŸ”„ |
| CRM004 | Categorize Transaction | â€” | POST | TRX006 | ğŸ”„ |
| CRM005 | Log Reversal Activity | â€” | POST | TRX007 | ğŸ”„ |
| CRM006 | Create Dispute Ticket | â€” | POST | TRX008 | ğŸ”„ |

---

### 6. Notification Worker APIs

| **Action** | **Summary** | **Route** | **Method** | **Operation ID** | **Status** |
| ---------- | ----------- | --------- | ---------- | ---------------- | ---------- |
| MSG001 | Send Recurring Setup Confirmation | â€” | POST | TRX001 | ğŸ”„ |
| MSG002 | Send Tag Creation / Update Notice | â€” | POST | TRX003, TRX004 | ğŸ”„ |
| MSG003 | Send Tag Deletion Notice | â€” | POST | TRX005 | ğŸ”„ |
| MSG004 | Send Categorization Confirmation | â€” | POST | TRX006 | ğŸ”„ |
| MSG005 | Send Reversal Confirmation | â€” | POST | TRX007 | ğŸ”„ |
| MSG006 | Send Dispute Acknowledgement | â€” | POST | TRX008 | ğŸ”„ |

---

### 7. Document Processor APIs

| **Action** | **Summary** | **Route** | **Method** | **Operation ID** | **Status** |
| ---------- | ----------- | --------- | ---------- | ---------------- | ---------- |
| DOC001 | Store Reversal Documentation | â€” | POST | TRX007 | ğŸ”„ |
| DOC002 | Store Dispute Evidence Documents | â€” | POST | TRX008 | ğŸ”„ |

---

### 8. User Settings Utility

| **Action** | **Summary** | **Route** | **Method** | **Operation ID** | **Status** |
| ---------- | ----------- | --------- | ---------- | ---------------- | ---------- |
| US001 | Update Recurring Payment Preferences | â€” | PUT | TRX001 | ğŸ”„ |
| US002 | Update Personal Finance Settings | â€” | PUT | TRX003, TRX004, TRX005, TRX006 | ğŸ”„ |
| US003 | Update Transaction Settings | â€” | PUT | TRX007 | ğŸ”„ |
| US004 | Update Dispute Preferences | â€” | PUT | TRX008 | ğŸ”„ |

---

## Security and Governance

### Permissions & APIs

| **Permission** | **Permission Name** | **APIs** | **Status** |
| --------------- | -------------------- | -------- | ---------- |
| trx_view | View Tags & Transactions | TRX002 | ğŸ”„ |
| trx_manage | Tag & Categorize Transactions | TRX003â€“TRX006 | ğŸ”„ |
| trx_risk | Reversal & Dispute Operations | TRX007â€“TRX008 | ğŸ”„ |

---

### Roles & Permissions

| **Role** | **Role Name** | **Permissions** | **Status** |
| -------- | -------------- | ---------------- | ---------- |
| RP001 | System Admin | trx_view, trx_manage, trx_risk | ğŸ”„ |
| RP002 | Finance Officer | trx_view, trx_risk | ğŸ”„ |
| RP003 | General User | trx_view, trx_manage | ğŸ”„ |

---

### Policies & Attributes

| **Policy ID** | **Policy**                                 | **Attribute / Condition**           | **Status** |
| ------------- | ------------------------------------------ | ----------------------------------- | ---------- |
| P_TRX_001     | Only transaction owner can tag or reverse  | `transaction.owner_id eq user.id`   | ğŸ”„         |
| P_TRX_002     | Only eligible transactions can be reversed | `transaction.status eq "COMPLETED"` | ğŸ”„         |
| P_TRX_003     | Disputes require supporting evidence       | `documents.attached eq true`        | ğŸ”„         |

---

### Related Documents

1. **Transaction Recurrence & Scheduling Guide**  
2. **Personal Finance Tagging Standards**  
3. **Transaction Reversal & Dispute Lifecycle**  

---

âœ… - Complete  
ğŸ”„ - In Progress  
â° - Delayed  
ğŸš§ - In Testing  
âš ï¸ - Comments from Testing  
â›” - Failed Testing  
ğŸ“‹ - Planned for future release
