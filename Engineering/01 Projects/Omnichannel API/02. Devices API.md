# 02. Devices API

**Status:** In Progress  
**Thumbnail:** `#FFAA33`  
**Description:** Device enrollment, management, certificate handling, and PIN management  
**Application:** Retail Engine  
**Due On:** 2025-11-25T12:00:00

---

## Overview

The **Devices Module** manages all device-related operations for secure access to banking and fintech services. It handles device enrollment, activation/deactivation, ownership transfer, certificate issuance, and PIN management.

This module ensures device security, compliance, and proper integration with identity, CRM, and messaging services.

---

## Core Business Functions

- **Device Enrollment** â€“ check status, enroll new devices, manage device certificates  
- **Device Activation/Deactivation** â€“ control device access with security enforcement  
- **Device Ownership Transfer** â€“ securely transfer devices between users  
- **Device PIN Management** â€“ create, change, reset, and confirm device PINs  
- **Certificate Management** â€“ generate, sign, rotate device certificates  
- **Notifications & Updates** â€“ communicate status, changes, and confirmations to users  

---

# REST Endpoints

| Action | Summary | Route | Method | Operation ID | Status |
|--------|---------|-------|--------|--------------|--------|
| Check Device Status | Retrieves current device status and activation state | `/devices/enrollment/status` | GET | DV001 | ðŸ”„ |
| (de)Activate Device | Enables or disables device access with immediate security enforcement | `/devices/enrollment/status` | POST | DV002 | ðŸ”„ |
| Submit CSR for Device | Generates CSR for device enrollment and submits to CA | `/devices/certificate/request` | POST | DV003 | ðŸ”„ |
| Sign CSR for Device | Processes and signs CSR to issue valid device certificates | `/devices/certificate/sign` | POST | DV004 | ðŸ”„ |
| Rotate Expiring Certificates | Automatically renews device certificates before expiration | `/devices/certificate/rotate` | POST | DV005 | ðŸ”„ |
| Transfer Device Ownership | Initiates secure device ownership transfer between users | `/devices/ownership/transfer` | POST | DV006 | ðŸ”„ |
| Accept Transfer Request | Completes device ownership transfer upon recipient acceptance | `/devices/ownership/accept` | POST | DV007 | ðŸ”„ |
| Create Device PIN | Establishes secure PIN protection for device access | `/devices/pin/my` | POST | DV008 | ðŸ”„ |
| Change Device PIN | Updates existing device PIN with verification | `/devices/pin/change` | POST | DV009 | ðŸ”„ |
| Reset Device PIN | Initiates PIN reset process with secure verification | `/devices/pin/reset` | POST | DV010 | ðŸ”„ |
| Confirm PIN Reset | Validates reset token and allows user to set new PIN | `/devices/pin/confirm` | POST | DV011 | ðŸ”„ |

---

## Security & Governance

### Permissions & APIs

| Permission | Name | APIs | Status |
|------------|------|------|--------|
| **dev_status** | View Device Status | DV001 | ðŸ”„ |
| **dev_manage** | Activate/Deactivate Devices | DV002 | ðŸ”„ |
| **dev_certs** | Manage Device Certificates | DV003â€“DV005 | ðŸ”„ |
| **dev_transfer** | Device Ownership | DV006â€“DV007 | ðŸ”„ |
| **dev_pin** | Manage Device PIN | DV008â€“DV011 | ðŸ”„ |

---

### Roles & Permissions

| Role | Name | Permissions | Status |
|------|------|------------|--------|
| **DR001** | Administrator | All Device Permissions | ðŸ”„ |
| **DR002** | Security Officer | dev_status, dev_manage, dev_certs | ðŸ”„ |
| **DR003** | Support Officer | dev_transfer, dev_pin | ðŸ”„ |

---

### Policies & Attributes

| Policy ID | Policy | Condition | Status |
|-----------|--------|-----------|--------|
| **P_DEV_001** | Devices MUST be enrolled before activation | `device.status eq enrolled` | ðŸ”„ |
| **P_DEV_002** | PIN resets require valid reset token | `token.status eq valid` | ðŸ”„ |

---

### Related Documents

1. Device Enrollment & Management Guide  
2. Certificate Lifecycle Policy  
3. Device Security & PIN Policy
